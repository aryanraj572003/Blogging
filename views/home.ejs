<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('./partials/head') %>
    <title>Blogify</title>
</head>

<body style="min-height:100vh;">
  <%- include('./partials/nav') %>
  <div class="container-fluid px-0 d-flex justify-content-center mb-5 mt-4 ">
    <div class="d-flex border border-black rounded-4" style="height: 400px; width: 65%;">
      <div  style="width: 60%; height: 100%;">
        <img src="<%= locals.blogs[blogs.length-1].coverImageURL %>" alt="<%= locals.blogs[0].title %>" style="width: 100%; height: 100%; object-fit: cover; border-top-left-radius: 15px;border-bottom-left-radius: 15px;" >
      </div>
      
      <div class="p-4 d-flex flex-column justify-content-between mt-4 " style="width: 40%;">
        <div>
          <span class="badge bg-dark rounded-1 mb-2"><%= locals.blogs[blogs.length-1].category %></span>
          <h3 class="fs-4 fw-bold mb-3"><%= locals.blogs[blogs.length-1].title %></h3>
          <p class="text-muted small"><%= locals.blogs[blogs.length-1].body.substring(0, 250) %>...</p>
        </div>
        <div class="d-flex justify-content-between align-items-center">
          <small class="text-muted">
            <i class="bi bi-person"></i> <%= locals.blogs[blogs.length-1].createdBy ? locals.blogs[blogs.length-1].createdBy.fullName : 'Unknown' %> | 
            <%= new Date(locals.blogs[0].createdAt).toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) %>
          </small>
          <a href="/blog/<%= locals.blogs[blogs.length-1]._id %>" class="btn btn-dark rounded-2">Read</a>
        </div>
      </div>
    </div>
  </div>

    <div class="container-fluid px-0">
      <div class="container mt-4" style="width:65%;">


        <div class="d-flex justify-content-between align-items-center mb-3">
          <h2 class="fw-bold fs-4">All Posts</h2>
          <div class="d-flex align-items-center">
            <input type="text" class="form-control form-control-sm me-2 border rounded-2" placeholder="Search..."
              style="width: 200px; border-radius: 0;">
          </div>
        </div>

        
        <div class="row blog-grid g-3 pb-5">
          <% locals.blogs.slice().reverse().slice(1).forEach(blog=> { %>
            
              <div class="col-md-4">
                <div class="card blog-card h-100 border border-black rounded-4">
                  <img src="<%= blog.coverImageURL %>" class="card-img-top blog-card-img" alt="<%= blog.title %>">
                  <div class="card-body d-flex flex-column p-3">

                    <div class="d-flex align-items-center gap-2 mb-2">
                      <span class="badge bg-dark rounded-1 small">
                        <%= blog.category %>
                      </span>
                      <span class="rounded-0 px-2 py-1 small text-danger">
                        <i class="bi bi-heart"></i>
                        <%= blog.likes ? blog.likes.length : 0 %>
                      </span>
                    </div>

                    <h5 class="card-title fs-6">
                      <%= blog.title %>
                    </h5>

                    <% if (blog.createdBy) { %>
                      <div>
                        <a href="/user/profile/<%= blog.createdBy._id %>"
                          class="text-decoration-none text-muted d-flex align-items-center gap-1 small">
                          <i class="bi bi-person"></i> By <%= blog.createdBy.fullName %>
                        </a>
                      </div>
                      <% } %>

                        <div class="d-flex justify-content-between align-items-center mt-auto">
                          <small class="text-muted small">
                            <%= new Date(blog.createdAt).toLocaleDateString('en-US', { month: 'short' , day: 'numeric'
                              }) %>
                          </small>
                          <a href="/blog/<%= blog._id %>" class="btn btn-dark rounded-2 btn-sm">Read</a>
                        </div>

                  </div>
                </div>
              </div>
           
            <% }) %>
        </div>


      </div>
    </div>

    <%- include('./partials/script') %>
</body>

</html>

<footer class="footer bg-dark text-white py-3">
  <div class="container text-center">
    <p>&copy; 2025 Blogging Platform. All rights reserved.</p>
    <p><a href="/" class="text-white">Privacy Policy</a> | <a href="/" class="text-white">Terms of Service</a></p>
  </div>
</footer>