<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('./partials/head') %>
        <title>Blog</title>

</head>

<body class="warm-bg" style="min-height:100vh;">
    <%- include('./partials/nav') %>
        <div class="container mt-4">
            <div class="blog-post-card p-4 rounded-3 shadow-sm mb-4">
                <h1 class="mb-3">
                    <%= blog.title %>
                </h1>
                <img src="<%= blog.coverImageURL %>" class="blog-cover-img mb-3 rounded-3" width="100%" style="max-width:500px;">
                <p class="mt-3 blog-body-text">
                    <%= blog.body %>
                </p>
                <div class="d-flex align-items-center gap-2 mt-4 author-info">
                    <img src="<%= blog.createdBy.profileImageURL %> " width="50px" class="rounded-circle border border-warning">
                    <span class="fw-semibold"><%= blog.createdBy.fullName %></span>
                </div>
            </div>
        </div>
        <div class="container mt-3">
            <div class="comments-section p-4 rounded-3 shadow-sm">
                <h3>Comments (<%= comments.length %>)</h3>
                <% if (locals.user) { %>
                    <form action="/blog/comment/<%= blog._id %> " method="post" class="mb-3">
                        <div class="mb-3">
                            <input type="text" name="content" class="form-control" placeholder="Enter your comment">
                            <button class="btn btn-accent mt-2" type="submit">Add</button>
                        </div>
                    </form>
                <% } %>
                <div class="container mt-3">
                    <% comments.forEach(comment=> { %>
                        <div class="d-flex align-items-center gap-2 mb-2">
                            <img src="<%= comment.createdBy.profileImageURL %> " width="25px" class="rounded-circle border border-warning">
                            <span class="fw-semibold"><%= comment.createdBy.fullName %></span>
                        </div>
                        <pre class="mt-2 comment-content"><%= comment.content %></pre>
                    <% }) %>
                </div>
            </div>
        </div>
        <%- include('./partials/script') %>
</body>

</html>